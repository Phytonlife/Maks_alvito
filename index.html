<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIvito Pro - Продвинутый маркетплейс с ИИ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --secondary-color: #ec4899;
            --accent-color: #8b5cf6;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-color: #1f2937;
            --darker-color: #111827;
            --light-color: #f9fafb;
            --gray-color: #6b7280;
            --light-gray: #e5e7eb;
            --border-color: #d1d5db;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --radius-sm: 8px;
            --radius: 12px;
            --radius-md: 16px;
            --radius-lg: 20px;
            --radius-xl: 24px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light-color);
            color: var(--dark-color);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--darker-color), var(--dark-color));
            color: white;
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-lg);
            border-bottom: 3px solid var(--primary-color);
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 28px;
            font-weight: 900;
            text-decoration: none;
            color: white;
            transition: var(--transition);
        }

        .logo:hover {
            transform: translateY(-2px);
        }

        .logo-icon {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
        }

        .logo-text {
            background: linear-gradient(to right, #60a5fa, var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            font-size: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            white-space: nowrap;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
        }

        .user-avatar:hover {
            transform: scale(1.1);
        }

        .notification-badge {
            position: relative;
        }

        .notification-badge::after {
            content: '3';
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            background-color: var(--danger-color);
            color: white;
            border-radius: 50%;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .header-bottom {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-container {
            flex: 1;
            position: relative;
            min-width: 0;
        }

        .search-input {
            width: 100%;
            padding: 14px 20px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            background-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 50px;
            padding: 10px 24px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }

        .search-btn:hover {
            transform: translateY(-50%) scale(1.05);
        }

        .location-selector {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px 16px;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
        }

        /* Navigation */
        nav {
            background-color: white;
            box-shadow: var(--shadow);
            position: sticky;
            top: 96px;
            z-index: 999;
            border-bottom: 1px solid var(--light-gray);
        }

        .nav-container {
            display: flex;
            align-items: center;
            padding: 12px 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .nav-container::-webkit-scrollbar {
            height: 4px;
        }

        .nav-container::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .nav-container::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 2px;
        }

        .category-item {
            padding: 10px 20px;
            white-space: nowrap;
            border-radius: var(--radius);
            margin-right: 8px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
            font-weight: 500;
            background: none;
            border: none;
            font-family: inherit;
            font-size: inherit;
            color: inherit;
        }

        .category-item:hover {
            background-color: var(--light-color);
        }

        .category-item.active {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            box-shadow: var(--shadow-md);
        }

        .category-count {
            background-color: rgba(255, 255, 255, 0.2);
            padding: 2px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Main Content */
        main {
            padding: 32px 0;
            min-height: calc(100vh - 400px);
        }

        .section-title {
            font-size: 28px;
            margin-bottom: 24px;
            color: var(--darker-color);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 800;
        }

        .section-title i {
            color: var(--primary-color);
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-subtitle {
            font-size: 16px;
            color: var(--gray-color);
            margin-bottom: 32px;
            max-width: 800px;
        }

        /* Credit Banner */
        .credit-banner {
            background: linear-gradient(135deg, #1e3a8a, var(--primary-color));
            color: white;
            border-radius: var(--radius-xl);
            padding: 40px;
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
        }

        .credit-content h2 {
            font-size: 32px;
            margin-bottom: 16px;
            font-weight: 800;
        }

        .credit-content p {
            font-size: 16px;
            opacity: 0.9;
            max-width: 600px;
            margin-bottom: 24px;
        }

        .credit-stats {
            display: flex;
            gap: 32px;
            margin-top: 16px;
        }

        .credit-stat-value {
            font-size: 28px;
            font-weight: 800;
            color: #ffd700;
        }

        .credit-stat-label {
            font-size: 14px;
            opacity: 0.8;
        }

        .credit-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            position: relative;
            z-index: 2;
            min-width: 200px;
        }

        /* Promo Grid */
        .promo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .promo-card {
            background: linear-gradient(135deg, var(--dark-color), var(--darker-color));
            color: white;
            border-radius: var(--radius-lg);
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            cursor: pointer;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .promo-card:nth-child(2) {
            background: linear-gradient(135deg, var(--accent-color), #7c3aed);
        }

        .promo-card:nth-child(3) {
            background: linear-gradient(135deg, var(--secondary-color), #db2777);
        }

        .promo-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 48px;
        }

        .product-card {
            background-color: white;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            border: 1px solid var(--light-gray);
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-color);
        }

        .product-badges {
            position: absolute;
            top: 16px;
            left: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 2;
        }

        .product-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-new {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
        }

        .badge-sale {
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
            color: white;
        }

        .badge-premium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .badge-ai {
            background: linear-gradient(135deg, var(--accent-color), #7c3aed);
            color: white;
        }

        .product-image-container {
            height: 200px;
            width: 100%;
            overflow: hidden;
            position: relative;
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-info {
            padding: 20px;
        }

        .product-category {
            font-size: 12px;
            color: var(--gray-color);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .product-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--darker-color);
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-description {
            color: var(--gray-color);
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .product-price-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .product-price {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary-color);
        }

        .product-old-price {
            font-size: 14px;
            color: var(--gray-color);
            text-decoration: line-through;
            margin-right: 8px;
        }

        .product-discount {
            font-size: 12px;
            background-color: var(--danger-color);
            color: white;
            padding: 2px 8px;
            border-radius: var(--radius-sm);
            font-weight: 700;
        }

        .product-seller {
            display: flex;
            align-items: center;
            gap: 12px;
            padding-top: 16px;
            border-top: 1px solid var(--light-gray);
        }

        .seller-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 16px;
            position: relative;
            flex-shrink: 0;
        }

        .seller-status {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 10px;
            height: 10px;
            background-color: var(--success-color);
            border-radius: 50%;
            border: 2px solid white;
        }

        .seller-info {
            min-width: 0;
        }

        .seller-info h4 {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .seller-info p {
            font-size: 12px;
            color: var(--gray-color);
        }

        .seller-rating {
            color: #fbbf24;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .product-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .action-btn {
            flex: 1;
            padding: 10px;
            border-radius: var(--radius);
            font-size: 13px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid var(--light-gray);
            background-color: white;
            color: var(--dark-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-weight: 600;
        }

        .action-btn.chat-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
        }

        .action-btn.chat-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
            transform: translateY(-2px);
        }

        .action-btn:hover {
            background-color: var(--light-color);
            border-color: var(--primary-color);
        }

        /* Credit Calculator */
        .credit-calculator {
            background-color: white;
            border-radius: var(--radius-xl);
            padding: 32px;
            margin: 40px 0;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--light-gray);
        }

        .calculator-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .calculator-title {
            font-size: 24px;
            font-weight: 800;
            color: var(--darker-color);
        }

        .calculator-subtitle {
            color: var(--gray-color);
            font-size: 14px;
            margin-top: 4px;
        }

        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }

        .calculator-input-group {
            margin-bottom: 20px;
        }

        .calculator-input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 14px;
        }

        .calculator-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--light-gray);
            border-radius: var(--radius);
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }

        .calculator-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .range-value {
            font-size: 18px;
            font-weight: 800;
            color: var(--primary-color);
            margin-top: 8px;
        }

        .calculator-result {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: var(--radius-lg);
            padding: 24px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--light-gray);
        }

        .result-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .result-label {
            color: var(--gray-color);
            font-size: 14px;
        }

        .result-value {
            font-weight: 700;
            font-size: 16px;
            color: var(--dark-color);
        }

        .result-value.total {
            color: var(--primary-color);
            font-size: 24px;
            font-weight: 800;
        }

        /* AI Chat Widget */
        .chat-toggle {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            z-index: 1000;
            transition: var(--transition);
            border: none;
        }

        .chat-toggle:hover {
            transform: scale(1.1);
        }

        .chat-widget {
            position: fixed;
            bottom: 100px;
            right: 24px;
            width: 380px;
            max-width: calc(100vw - 48px);
            background-color: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            display: none;
            flex-direction: column;
            max-height: 600px;
            border: 1px solid var(--light-gray);
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 0;
        }

        .chat-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #fbbf24);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .chat-header-text {
            min-width: 0;
        }

        .chat-header-text h3 {
            font-size: 16px;
            font-weight: 800;
            margin-bottom: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-status {
            font-size: 12px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background-color: var(--success-color);
            border-radius: 50%;
            flex-shrink: 0;
        }

        .chat-actions {
            display: flex;
            gap: 8px;
        }

        .chat-action-btn {
            background: none;
            border: none;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: var(--transition);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .chat-action-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .chat-body {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            max-height: 350px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            background-color: #f8fafc;
        }

        .chat-message {
            display: flex;
            max-width: 85%;
            animation: messageAppear 0.3s ease-out;
        }

        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message.bot {
            align-self: flex-start;
        }

        .chat-message.user {
            align-self: flex-end;
        }

        .message-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            font-size: 14px;
            line-height: 1.5;
            position: relative;
            box-shadow: var(--shadow-sm);
            word-break: break-word;
        }

        .bot .message-bubble {
            background-color: white;
            color: var(--dark-color);
            border-bottom-left-radius: 4px;
            border: 1px solid var(--light-gray);
        }

        .user .message-bubble {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message-time {
            font-size: 11px;
            color: var(--gray-color);
            margin-top: 4px;
            text-align: right;
        }

        .chat-footer {
            padding: 20px;
            border-top: 1px solid var(--light-gray);
            background-color: white;
        }

        .chat-input-container {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--light-gray);
            border-radius: 50px;
            outline: none;
            transition: var(--transition);
            font-size: 14px;
            min-width: 0;
        }

        .chat-input:focus {
            border-color: var(--primary-color);
        }

        .send-btn {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        .suggested-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .question-chip {
            padding: 8px 12px;
            background-color: #f3f4f6;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--light-gray);
            white-space: nowrap;
        }

        .question-chip:hover {
            background-color: #e5e7eb;
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            background-color: var(--darker-color);
            color: #d1d5db;
            padding: 60px 0 30px;
            border-top: 3px solid var(--primary-color);
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 32px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            color: white;
            font-size: 16px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--primary-color);
            font-weight: 700;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #9ca3af;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .footer-links a:hover {
            color: white;
            transform: translateX(5px);
        }

        .social-icons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .social-icons a {
            width: 36px;
            height: 36px;
            background-color: #374151;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            font-size: 16px;
            text-decoration: none;
        }

        .social-icons a:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid #374151;
            color: #9ca3af;
            font-size: 14px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            border-radius: var(--radius-lg);
            padding: 32px;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(37, 99, 235, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            vertical-align: middle;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Custom Scrollbar */
        .chat-body::-webkit-scrollbar {
            width: 6px;
        }

        .chat-body::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .chat-body::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 3px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .header-bottom {
                flex-wrap: wrap;
            }
            
            .search-container {
                min-width: 100%;
                order: 1;
                margin-top: 12px;
            }
        }

        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }
            
            .header-actions {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .credit-banner {
                flex-direction: column;
                text-align: center;
                padding: 24px;
                gap: 24px;
            }
            
            .credit-stats {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .credit-actions {
                width: 100%;
            }
            
            .chat-widget {
                width: calc(100vw - 40px);
                right: 20px;
            }
            
            .calculator-header {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .promo-grid {
                grid-template-columns: 1fr;
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                padding: 10px 16px;
                font-size: 14px;
            }
            
            .chat-toggle {
                width: 50px;
                height: 50px;
                font-size: 20px;
                bottom: 16px;
                right: 16px;
            }
            
            .chat-widget {
                bottom: 80px;
                right: 16px;
                width: calc(100vw - 32px);
            }
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .visible {
            display: flex !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-top">
                <a href="#" class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <span class="logo-text">AIvito Pro</span>
                </a>
                <div class="header-actions">
                    <button class="btn btn-secondary">
                        <i class="fas fa-heart"></i> Избранное
                    </button>
                    <button class="btn btn-secondary notification-badge">
                        <i class="fas fa-bell"></i> Уведомления
                    </button>
                    <button class="btn btn-primary" id="addAdvert">
                        <i class="fas fa-plus-circle"></i> Подать объявление
                    </button>
                    <div class="user-menu">
                        <div class="user-avatar">
                            AI
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-bottom">
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Найти товар, услугу, автомобиль..." id="searchInput">
                    <button class="search-btn" id="searchBtn">
                        <i class="fas fa-search"></i> Найти
                    </button>
                </div>
                <div class="location-selector" id="locationSelector">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Вся Россия</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <button class="btn btn-primary" id="expressCredit">
                    <i class="fas fa-bolt"></i> Кредит до 500 000 ₽
                </button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <button class="category-item active" data-category="all">
                <i class="fas fa-th-large"></i> Все товары <span class="category-count">156</span>
            </button>
            <button class="category-item" data-category="cars">
                <i class="fas fa-car"></i> Автомобили <span class="category-count">32</span>
            </button>
            <button class="category-item" data-category="electronics">
                <i class="fas fa-laptop"></i> Электроника <span class="category-count">45</span>
            </button>
            <button class="category-item" data-category="ai-tech">
                <i class="fas fa-brain"></i> ИИ-технологии <span class="category-count">28</span>
            </button>
            <button class="category-item" data-category="realty">
                <i class="fas fa-home"></i> Недвижимость <span class="category-count">18</span>
            </button>
            <button class="category-item" data-category="fashion">
                <i class="fas fa-tshirt"></i> Мода <span class="category-count">37</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container">
        <!-- Credit Banner -->
        <section class="credit-banner">
            <div class="credit-content">
                <h2>Кредит на любые покупки до 5 000 000 ₽</h2>
                <p>Одобрение за 5 минут! Первый платеж через 3 месяца. Специальные условия для клиентов AIvito Pro</p>
                <div class="credit-stats">
                    <div class="credit-stat">
                        <div class="credit-stat-value">от 5,9%</div>
                        <div class="credit-stat-label">Ставка в год</div>
                    </div>
                    <div class="credit-stat">
                        <div class="credit-stat-value">до 7 лет</div>
                        <div class="credit-stat-label">Срок кредита</div>
                    </div>
                    <div class="credit-stat">
                        <div class="credit-stat-value">95%</div>
                        <div class="credit-stat-label">Одобрение</div>
                    </div>
                </div>
            </div>
            <div class="credit-actions">
                <button class="btn btn-primary" id="calculateCredit" style="background: white; color: var(--primary-color);">
                    <i class="fas fa-calculator"></i> Рассчитать кредит
                </button>
                <button class="btn btn-secondary" id="creditConditions" style="border-color: white; color: white;">
                    <i class="fas fa-file-alt"></i> Узнать условия
                </button>
            </div>
        </section>

        <!-- Credit Calculator -->
        <section class="credit-calculator" id="creditCalculator">
            <div class="calculator-header">
                <div>
                    <h3 class="calculator-title">Кредитный калькулятор</h3>
                    <p class="calculator-subtitle">Рассчитайте ежемесячный платеж по кредиту на любую покупку</p>
                </div>
                <button class="btn btn-primary" id="saveCalculation">
                    <i class="fas fa-download"></i> Сохранить расчет
                </button>
            </div>
            <div class="calculator-grid">
                <div class="calculator-inputs">
                    <div class="calculator-input-group">
                        <label for="loanAmount">Сумма кредита, ₽</label>
                        <input type="range" id="loanAmount" min="10000" max="5000000" step="10000" value="1000000" class="calculator-input">
                        <div class="range-value" id="loanAmountValue">1 000 000 ₽</div>
                    </div>
                    <div class="calculator-input-group">
                        <label for="loanTerm">Срок кредита, месяцев</label>
                        <input type="range" id="loanTerm" min="3" max="84" step="3" value="24" class="calculator-input">
                        <div class="range-value" id="loanTermValue">24 месяца</div>
                    </div>
                    <div class="calculator-input-group">
                        <label for="interestRate">Процентная ставка, %</label>
                        <input type="range" id="interestRate" min="5.9" max="25" step="0.1" value="9.9" class="calculator-input">
                        <div class="range-value" id="interestRateValue">9.9%</div>
                    </div>
                    <button class="btn btn-primary" style="width: 100%; padding: 14px;" id="applyCredit">
                        <i class="fas fa-paper-plane"></i> Оформить заявку
                    </button>
                </div>
                <div class="calculator-result">
                    <h4 style="font-size: 18px; margin-bottom: 20px; color: var(--dark-color);">Результаты расчета</h4>
                    <div class="result-item">
                        <span class="result-label">Ежемесячный платеж</span>
                        <span class="result-value" id="monthlyPayment">46 140 ₽</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Переплата по кредиту</span>
                        <span class="result-value" id="totalOverpayment">107 360 ₽</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Общая сумма выплат</span>
                        <span class="result-value total" id="totalPayment">1 107 360 ₽</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label">Дата последнего платежа</span>
                        <span class="result-value" id="lastPaymentDate">Март 2025</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Promo Grid -->
        <div class="promo-grid">
            <div class="promo-card">
                <h3>ИИ-продавцы 24/7</h3>
                <p>Все продавцы на нашей платформе — продвинутые ИИ, готовые ответить на вопросы в любое время</p>
                <button class="btn btn-secondary" style="background: rgba(255,255,255,0.2); align-self: flex-start;">
                    <i class="fas fa-robot"></i> Попробовать
                </button>
            </div>
            <div class="promo-card">
                <h3>Гарантия возврата</h3>
                <p>30 дней на возврат любого товара без объяснения причин. Полная защита покупателя</p>
                <button class="btn btn-secondary" style="background: rgba(255,255,255,0.2); align-self: flex-start;">
                    <i class="fas fa-shield-alt"></i> Подробнее
                </button>
            </div>
            <div class="promo-card">
                <h3>Доставка за 24 часа</h3>
                <p>Экспресс-доставка по всей России. Бесплатная доставка при заказе от 5000 ₽</p>
                <button class="btn btn-secondary" style="background: rgba(255,255,255,0.2); align-self: flex-start;">
                    <i class="fas fa-shipping-fast"></i> Узнать сроки
                </button>
            </div>
        </div>

        <!-- Featured Products -->
        <section>
            <h2 class="section-title">
                <i class="fas fa-star"></i>
                <span>Топ-товары недели</span>
            </h2>
            <p class="section-subtitle">Самые популярные товары, выбранные нашим ИИ-рекомендателем</p>
            <div class="products-grid" id="featuredProducts">
                <!-- Featured products will be loaded here -->
            </div>
        </section>

        <!-- Cars Section -->
        <section style="margin-top: 48px;">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24px; flex-wrap: wrap; gap: 16px;">
                <div>
                    <h2 class="section-title">
                        <i class="fas fa-car"></i>
                        <span>Автомобили с ИИ-дилерами</span>
                    </h2>
                    <p class="section-subtitle">Покупка авто с полным ИИ-сопровождением</p>
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-secondary" id="carFilters">
                        <i class="fas fa-filter"></i> Фильтры
                    </button>
                    <button class="btn btn-primary" id="aiCarSelection">
                        <i class="fas fa-chart-line"></i> ИИ-подбор
                    </button>
                </div>
            </div>
            <div class="products-grid" id="carsGrid">
                <!-- Cars will be loaded here -->
            </div>
        </section>

        <!-- All Products -->
        <section style="margin-top: 48px;">
            <h2 class="section-title">
                <i class="fas fa-box-open"></i>
                <span>Все товары и услуги</span>
            </h2>
            <div class="products-grid" id="allProductsGrid">
                <!-- All products will be loaded here -->
            </div>
        </section>
    </main>

    <!-- AI Chat Widget -->
    <button class="chat-toggle" id="chatToggle">
        <i class="fas fa-robot"></i>
    </button>
    
    <div class="chat-widget" id="chatWidget">
        <div class="chat-header">
            <div class="chat-header-info">
                <div class="chat-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="chat-header-text">
                    <h3 id="chatSellerName">ИИ-Помощник</h3>
                    <div class="chat-status">
                        <div class="status-indicator"></div>
                        <span id="chatStatus">Отвечает мгновенно</span>
                    </div>
                </div>
            </div>
            <div class="chat-actions">
                <button class="chat-action-btn" id="minimizeChat">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="chat-action-btn" id="closeChat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="chat-body" id="chatBody">
            <!-- Chat messages will be loaded here -->
        </div>
        <div class="chat-footer">
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" placeholder="Напишите сообщение...">
                <button class="send-btn" id="sendBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="suggested-questions" id="suggestedQuestions">
                <!-- Suggested questions will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="productModal">
        <div class="modal-content">
            <!-- Modal content will be loaded here -->
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-container">
                <div class="footer-column">
                    <h3>AIvito Pro</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> О компании</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Реклама на сайте</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> ИИ-технологии</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Безопасность</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Карьера в AIvito</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Покупателям</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Как купить</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Доставка</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Гарантия</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Возврат</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Отзывы</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Продавцам</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Как продавать</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> ИИ-ассистент продавца</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Тарифы</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Аналитика</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Правила</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Партнерам и кредиты</h3>
                    <ul class="footer-links">
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Кредитные партнеры</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Страхование</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Лизинг</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Инвестиции</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> Для бизнеса</a></li>
                    </ul>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-vk"></i></a>
                        <a href="#"><i class="fab fa-telegram"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 AIvito Pro - Продвинутый маркетплейс с ИИ.</p>
            </div>
        </div>
    </footer>

    <script>
        // Инициализация при загрузке
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // Основная функция инициализации
        function initializeApp() {
            initializeCreditCalculator();
            renderProducts();
            setupEventListeners();
            initializeChat();
            updateCreditValues();
        }

        // Инициализация кредитного калькулятора
        function initializeCreditCalculator() {
            const loanAmount = document.getElementById('loanAmount');
            const loanTerm = document.getElementById('loanTerm');
            const interestRate = document.getElementById('interestRate');
            
            if (loanAmount && loanTerm && interestRate) {
                loanAmount.addEventListener('input', updateCreditValues);
                loanTerm.addEventListener('input', updateCreditValues);
                interestRate.addEventListener('input', updateCreditValues);
            }
        }

        // Обновление значений кредитного калькулятора
        function updateCreditValues() {
            const loanAmount = parseInt(document.getElementById('loanAmount').value) || 1000000;
            const loanTerm = parseInt(document.getElementById('loanTerm').value) || 24;
            const interestRate = parseFloat(document.getElementById('interestRate').value) || 9.9;
            
            // Форматирование чисел
            document.getElementById('loanAmountValue').textContent = formatCurrency(loanAmount) + ' ₽';
            document.getElementById('loanTermValue').textContent = loanTerm + ' месяцев';
            document.getElementById('interestRateValue').textContent = interestRate.toFixed(1) + '%';
            
            // Расчет кредита
            const monthlyRate = interestRate / 100 / 12;
            const monthlyPayment = loanAmount * monthlyRate * Math.pow(1 + monthlyRate, loanTerm) / (Math.pow(1 + monthlyRate, loanTerm) - 1);
            const totalPayment = monthlyPayment * loanTerm;
            const totalOverpayment = totalPayment - loanAmount;
            
            // Обновление результатов
            document.getElementById('monthlyPayment').textContent = formatCurrency(Math.round(monthlyPayment)) + ' ₽';
            document.getElementById('totalOverpayment').textContent = formatCurrency(Math.round(totalOverpayment)) + ' ₽';
            document.getElementById('totalPayment').textContent = formatCurrency(Math.round(totalPayment)) + ' ₽';
            
            // Расчет даты последнего платежа
            const today = new Date();
            today.setMonth(today.getMonth() + loanTerm);
            const monthNames = ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь', 'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'];
            document.getElementById('lastPaymentDate').textContent = `${monthNames[today.getMonth()]} ${today.getFullYear()}`;
        }

        // Форматирование валюты
        function formatCurrency(amount) {
            return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
        }

        // База данных товаров
        const productsDatabase = [
            {
                id: 1,
                title: "Tesla Model S Plaid 2023",
                description: "Электромобиль с автопилотом 4.0, запас хода 850 км, разгон 0-100 за 1.99 сек",
                price: "12 500 000 ₽",
                oldPrice: "13 200 000 ₽",
                category: "cars",
                type: "car",
                image: "https://images.unsplash.com/photo-1536700503339-1e4b06520771?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                seller: {
                    name: "AutoAI",
                    type: "ИИ-автодилер",
                    rating: "4.9",
                    reviews: 234
                },
                featured: true,
                badges: ["new", "ai"],
                specs: {
                    "Год": "2023",
                    "Пробег": "5 000 км",
                    "Двигатель": "Электрический, 1100 л.с.",
                    "Коробка": "Автомат",
                    "Цвет": "Красный"
                }
            },
            {
                id: 2,
                title: "Нейросетевой проектор NeoVision X10",
                description: "Проектор с ИИ-коррекцией изображения, 8K, голосовой помощник, автофокус",
                price: "189 999 ₽",
                oldPrice: "229 999 ₽",
                category: "electronics",
                type: "product",
                image: "https://images.unsplash.com/photo-1542744095-fcf48d80b0fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                seller: {
                    name: "TechBot Pro",
                    type: "ИИ-технолог",
                    rating: "4.9",
                    reviews: 456
                },
                featured: true,
                badges: ["sale", "ai"],
                specs: {
                    "Разрешение": "8K",
                    "Яркость": "4500 люмен",
                    "Платформа": "Android TV 12"
                }
            },
            {
                id: 3,
                title: "ИИ-гардероб SmartWardrobe Pro",
                description: "Полный гардероб, подобранный ИИ-стилистом на основе анализа вашего стиля",
                price: "125 000 ₽",
                category: "fashion",
                type: "product",
                image: "https://images.unsplash.com/photo-1445205170230-053b83016050?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                seller: {
                    name: "FashionAI Pro",
                    type: "ИИ-стилист",
                    rating: "4.8",
                    reviews: 567
                },
                featured: true,
                badges: ["ai", "premium"],
                specs: {
                    "Предметы": "50 предметов одежды",
                    "Сезон": "Всесезонный",
                    "Материалы": "Премиальные ткани"
                }
            },
            {
                id: 4,
                title: "Персональный ИИ-ассистент LifeCompanion",
                description: "Персонализированный ИИ для управления жизнью, бизнесом и развлечениями",
                price: "25 000 ₽/мес",
                category: "ai-tech",
                type: "service",
                image: "https://images.unsplash.com/photo-1531746790731-6c087fecd65a?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                seller: {
                    name: "PersonalAI Pro",
                    type: "ИИ-компаньон",
                    rating: "4.9",
                    reviews: 1234
                },
                featured: true,
                badges: ["ai", "premium"],
                specs: {
                    "Функции": "Планирование, анализ, рекомендации",
                    "Интеграция": "Все устройства",
                    "Конфиденциальность": "Полная"
                }
            },
            {
                id: 5,
                title: "Умная квартира в Москва-Сити",
                description: "3-комн. кв., 120 м², ИИ-управление домом, панорамные окна, премиум-отделка",
                price: "450 000 000 ₽",
                category: "realty",
                type: "product",
                image: "https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                seller: {
                    name: "EstateAI Pro",
                    type: "ИИ-риелтор",
                    rating: "4.9",
                    reviews: 234
                },
                featured: false,
                badges: ["premium", "ai"],
                specs: {
                    "Площадь": "120 м²",
                    "Комнаты": "3",
                    "Этаж": "45",
                    "Ремонт": "Премиум"
                }
            },
            {
                id: 6,
                title: "BMW iX xDrive50 2023",
                description: "Премиальный электрокроссовер с ИИ-ассистентом, 523 л.с., запас хода 630 км",
                price: "8 900 000 ₽",
                category: "cars",
                type: "car",
                image: "https://images.unsplash.com/photo-1555212697-194d092e3b8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                seller: {
                    name: "BMW AI Agent",
                    type: "ИИ-консультант BMW",
                    rating: "4.8",
                    reviews: 189
                },
                featured: false,
                badges: ["premium"],
                specs: {
                    "Год": "2023",
                    "Пробег": "8 200 км",
                    "Двигатель": "Электрический, 523 л.с.",
                    "Коробка": "Автомат",
                    "Цвет": "Синий"
                }
            }
        ];

        // ИИ-продавцы
        const aiSellers = {
            "AutoAI": {
                name: "AutoAI",
                specialty: "автомобили",
                greeting: "🚗 Привет! Я AutoAI, ваш персональный ИИ-автодилер. Помогу выбрать идеальный автомобиль!",
                responses: [
                    "Этот автомобиль оснащен передовой системой автопилота, которая обучается на вашем стиле вождения.",
                    "Для этого авто доступна расширенная гарантия на 5 лет и бесплатное обслуживание в течение 3 лет.",
                    "Могу предложить выгодные условия кредитования через наших партнеров - ставка от 5.9% годовых.",
                    "Этот автомобиль имеет самый высокий рейтинг безопасности по результатам краш-тестов Euro NCAP."
                ],
                questions: [
                    "Расскажите про автопилот",
                    "Какие есть варианты оплаты?",
                    "Есть ли тест-драйв?",
                    "Сколько стоит страховка?"
                ]
            },
            "TechBot Pro": {
                name: "TechBot Pro",
                specialty: "электроника",
                greeting: "💻 Здравствуйте! Я TechBot Pro, эксперт по высокотехнологичным устройствам.",
                responses: [
                    "Это устройство использует нейросетевые алгоритмы для адаптивной оптимизации работы.",
                    "Гарантия на товар - 2 года, также доступна расширенная гарантия на 5 лет.",
                    "Доставка осуществляется курьерской службой в течение 1-3 дней в зависимости от региона.",
                    "Товар имеет все необходимые сертификаты соответствия и полностью безопасен."
                ],
                questions: [
                    "Какие характеристики?",
                    "Есть ли в наличии?",
                    "Какой срок доставки?",
                    "Можно ли вернуть?"
                ]
            }
        };

        // Рендеринг товаров
        function renderProducts() {
            const featuredGrid = document.getElementById('featuredProducts');
            const carsGrid = document.getElementById('carsGrid');
            const allGrid = document.getElementById('allProductsGrid');
            
            if (featuredGrid) featuredGrid.innerHTML = '';
            if (carsGrid) carsGrid.innerHTML = '';
            if (allGrid) allGrid.innerHTML = '';
            
            const featuredProducts = productsDatabase.filter(p => p.featured);
            const cars = productsDatabase.filter(p => p.category === 'cars');
            const allProducts = productsDatabase;
            
            if (featuredGrid && featuredProducts.length > 0) {
                featuredProducts.forEach(product => {
                    featuredGrid.innerHTML += createProductCard(product);
                });
            }
            
            if (carsGrid && cars.length > 0) {
                cars.forEach(car => {
                    carsGrid.innerHTML += createProductCard(car);
                });
            }
            
            if (allGrid && allProducts.length > 0) {
                allProducts.forEach(product => {
                    allGrid.innerHTML += createProductCard(product);
                });
            }
            
            setupProductEventListeners();
        }

        // Создание карточки товара
        function createProductCard(product) {
            const badgesHTML = product.badges ? product.badges.map(badge => {
                let badgeClass = '';
                let badgeText = '';
                switch(badge) {
                    case 'new': badgeClass = 'badge-new'; badgeText = 'Новинка'; break;
                    case 'sale': badgeClass = 'badge-sale'; badgeText = 'Скидка'; break;
                    case 'premium': badgeClass = 'badge-premium'; badgeText = 'Премиум'; break;
                    case 'ai': badgeClass = 'badge-ai'; badgeText = 'ИИ'; break;
                }
                return `<div class="product-badge ${badgeClass}">${badgeText}</div>`;
            }).join('') : '';
            
            const oldPriceHTML = product.oldPrice ? `
                <span class="product-old-price">${product.oldPrice}</span>
                <span class="product-discount">-${Math.round((1 - parseFloat(product.price.replace(/\s+/g, '').replace('₽', '')) / parseFloat(product.oldPrice.replace(/\s+/g, '').replace('₽', ''))) * 100)}%</span>
            ` : '';
            
            const specsHTML = product.specs ? Object.entries(product.specs).map(([key, value]) => `
                <div style="display: flex; justify-content: space-between; margin-bottom: 4px; font-size: 12px;">
                    <span style="color: var(--gray-color);">${key}:</span>
                    <span style="font-weight: 600;">${value}</span>
                </div>
            `).join('') : '';
            
            return `
                <div class="product-card" data-id="${product.id}" data-category="${product.category}">
                    <div class="product-badges">
                        ${badgesHTML}
                    </div>
                    <div class="product-image-container">
                        <img src="${product.image}" alt="${product.title}" class="product-image" onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                    </div>
                    <div class="product-info">
                        <div class="product-category">${product.category.toUpperCase()}</div>
                        <h3 class="product-title">${product.title}</h3>
                        <p class="product-description">${product.description}</p>
                        
                        ${specsHTML}
                        
                        <div class="product-price-container">
                            <div>
                                <div class="product-price">${product.price}</div>
                                ${oldPriceHTML}
                            </div>
                        </div>
                        
                        <div class="product-seller">
                            <div class="seller-avatar">
                                ${product.seller.name.charAt(0)}
                                <div class="seller-status"></div>
                            </div>
                            <div class="seller-info">
                                <h4>${product.seller.name}</h4>
                                <p>${product.seller.type}</p>
                                <div class="seller-rating">
                                    ${'★'.repeat(Math.floor(product.seller.rating))}
                                    <span style="color: var(--gray-color); margin-left: 4px;">${product.seller.rating} (${product.seller.reviews})</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="product-actions">
                            <button class="action-btn chat-btn" data-seller="${product.seller.name}">
                                <i class="fas fa-comment"></i> Чат с ИИ
                            </button>
                            <button class="action-btn favorite-btn" data-id="${product.id}">
                                <i class="fas fa-heart"></i>
                            </button>
                            <button class="action-btn cart-btn" data-id="${product.id}">
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Настройка обработчиков событий для товаров
        function setupProductEventListeners() {
            // Кнопки чата
            document.querySelectorAll('.chat-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const sellerName = this.getAttribute('data-seller');
                    openChat(sellerName);
                });
            });
            
            // Кнопки избранного
            document.querySelectorAll('.favorite-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = this.getAttribute('data-id');
                    toggleFavorite(productId, this);
                });
            });
            
            // Кнопки корзины
            document.querySelectorAll('.cart-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const productId = this.getAttribute('data-id');
                    addToCart(productId);
                });
            });
            
            // Карточки товаров
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.closest('.action-btn') && !e.target.closest('.product-badge')) {
                        const productId = this.getAttribute('data-id');
                        showProductDetails(productId);
                    }
                });
            });
        }

        // Настройка основных обработчиков событий
        function setupEventListeners() {
            // Фильтрация по категориям
            document.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.category-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.getAttribute('data-category');
                    filterByCategory(category);
                });
            });
            
            // Поиск
            const searchInput = document.getElementById('searchInput');
            const searchBtn = document.getElementById('searchBtn');
            
            if (searchBtn) {
                searchBtn.addEventListener('click', performSearch);
            }
            
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') performSearch();
                });
            }
            
            // Кнопки кредитного калькулятора
            const applyCreditBtn = document.getElementById('applyCredit');
            const saveCalculationBtn = document.getElementById('saveCalculation');
            
            if (applyCreditBtn) {
                applyCreditBtn.addEventListener('click', function() {
                    showNotification('Заявка на кредит отправлена!', 'success');
                });
            }
            
            if (saveCalculationBtn) {
                saveCalculationBtn.addEventListener('click', function() {
                    showNotification('Расчет сохранен в вашем профиле', 'success');
                });
            }
            
            // Другие кнопки
            const buttons = ['addAdvert', 'expressCredit', 'calculateCredit', 'creditConditions', 'carFilters', 'aiCarSelection'];
            buttons.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) {
                    btn.addEventListener('click', function() {
                        showNotification('Функция в разработке', 'info');
                    });
                }
            });
            
            // Селектор локации
            const locationSelector = document.getElementById('locationSelector');
            if (locationSelector) {
                locationSelector.addEventListener('click', function() {
                    showNotification('Выбор города временно недоступен', 'info');
                });
            }
        }

        // Фильтрация по категории
        function filterByCategory(category) {
            const allProductsGrid = document.getElementById('allProductsGrid');
            const featuredGrid = document.getElementById('featuredProducts');
            const carsGrid = document.getElementById('carsGrid');
            
            if (category === 'all') {
                if (featuredGrid) featuredGrid.style.display = 'grid';
                if (carsGrid) carsGrid.style.display = 'grid';
                if (allProductsGrid) {
                    allProductsGrid.innerHTML = '';
                    productsDatabase.forEach(product => {
                        allProductsGrid.innerHTML += createProductCard(product);
                    });
                }
                setupProductEventListeners();
                return;
            }
            
            if (featuredGrid) featuredGrid.style.display = 'none';
            if (carsGrid) carsGrid.style.display = category === 'cars' ? 'grid' : 'none';
            
            if (allProductsGrid) {
                allProductsGrid.innerHTML = '';
                
                const filteredProducts = productsDatabase.filter(p => p.category === category);
                
                if (filteredProducts.length === 0) {
                    allProductsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; background-color: white; border-radius: var(--radius-lg);">
                            <h3 style="margin-bottom: 16px; color: var(--dark-color);">Товары не найдены</h3>
                            <p style="color: var(--gray-color); margin-bottom: 24px;">Попробуйте изменить категорию</p>
                        </div>
                    `;
                } else {
                    filteredProducts.forEach(product => {
                        allProductsGrid.innerHTML += createProductCard(product);
                    });
                }
                
                setupProductEventListeners();
            }
        }

        // Поиск товаров
        function performSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput ? searchInput.value.toLowerCase().trim() : '';
            
            if (!searchTerm) {
                showNotification('Введите поисковый запрос', 'info');
                return;
            }
            
            const results = productsDatabase.filter(p => 
                p.title.toLowerCase().includes(searchTerm) ||
                p.description.toLowerCase().includes(searchTerm) ||
                p.category.toLowerCase().includes(searchTerm) ||
                p.seller.name.toLowerCase().includes(searchTerm)
            );
            
            const allProductsGrid = document.getElementById('allProductsGrid');
            if (allProductsGrid) {
                allProductsGrid.innerHTML = '';
                
                if (results.length === 0) {
                    allProductsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; background-color: white; border-radius: var(--radius-lg);">
                            <h3 style="margin-bottom: 16px; color: var(--dark-color);">По запросу "${searchTerm}" ничего не найдено</h3>
                        </div>
                    `;
                } else {
                    results.forEach(product => {
                        allProductsGrid.innerHTML += createProductCard(product);
                    });
                }
                
                setupProductEventListeners();
                
                // Обновляем активную категорию
                document.querySelectorAll('.category-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('.category-item[data-category="all"]').classList.add('active');
                
                // Скрываем другие секции
                const featuredGrid = document.getElementById('featuredProducts');
                const carsGrid = document.getElementById('carsGrid');
                if (featuredGrid) featuredGrid.style.display = 'none';
                if (carsGrid) carsGrid.style.display = 'none';
            }
        }

        // Показать детали товара
        function showProductDetails(productId) {
            const product = productsDatabase.find(p => p.id == productId);
            if (!product) return;
            
            const modal = document.getElementById('productModal');
            const modalContent = modal.querySelector('.modal-content');
            
            const specsHTML = product.specs ? Object.entries(product.specs).map(([key, value]) => `
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid var(--light-gray);">
                    <span style="color: var(--gray-color);">${key}:</span>
                    <span style="font-weight: 600;">${value}</span>
                </div>
            `).join('') : '';
            
            modalContent.innerHTML = `
                <div style="position: relative;">
                    <button onclick="closeModal()" style="position: absolute; top: -10px; right: -10px; background: none; border: none; font-size: 24px; cursor: pointer; color: var(--gray-color); z-index: 1;">&times;</button>
                    
                    <img src="${product.image}" alt="${product.title}" style="width: 100%; height: 200px; object-fit: cover; border-radius: var(--radius); margin-bottom: 20px;">
                    
                    <h3 style="margin-bottom: 12px; color: var(--dark-color); font-size: 20px;">${product.title}</h3>
                    <p style="margin-bottom: 16px; color: var(--gray-color);">${product.description}</p>
                    
                    <div style="background-color: var(--light-color); padding: 16px; border-radius: var(--radius); margin-bottom: 20px;">
                        <h4 style="margin-bottom: 12px; color: var(--dark-color);">Характеристики:</h4>
                        ${specsHTML}
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div>
                            <div style="font-size: 28px; font-weight: 800; color: var(--primary-color);">${product.price}</div>
                            ${product.oldPrice ? `<div style="font-size: 14px; color: var(--gray-color); text-decoration: line-through;">${product.oldPrice}</div>` : ''}
                        </div>
                        <button class="btn btn-primary" onclick="openChat('${product.seller.name}'); closeModal();">
                            <i class="fas fa-comment"></i> Чат с ИИ
                        </button>
                    </div>
                    
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-secondary" style="flex: 1;" onclick="addToCart(${product.id}); closeModal();">
                            <i class="fas fa-shopping-cart"></i> В корзину
                        </button>
                        <button class="btn btn-secondary" style="flex: 1;" onclick="toggleFavorite(${product.id}); closeModal();">
                            <i class="fas fa-heart"></i> В избранное
                        </button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        // Закрыть модальное окно
        function closeModal() {
            const modal = document.getElementById('productModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Показать уведомление
        function showNotification(message, type = 'info') {
            // Создаем уведомление
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background-color: white;
                padding: 16px 24px;
                border-radius: var(--radius);
                box-shadow: var(--shadow-xl);
                border-left: 4px solid ${type === 'success' ? 'var(--success-color)' : 'var(--primary-color)'};
                z-index: 2000;
                min-width: 300px;
                animation: slideIn 0.3s ease-out;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}" style="color: ${type === 'success' ? 'var(--success-color)' : 'var(--primary-color)'}; font-size: 20px;"></i>
                    <div>
                        <div style="font-weight: 600; margin-bottom: 4px;">${type === 'success' ? 'Успешно!' : 'Информация'}</div>
                        <div style="color: var(--gray-color);">${message}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Удаляем через 5 секунд
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 5000);
            
            // Добавляем CSS анимации
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
        }

        // Добавить в корзину
        function addToCart(productId) {
            const product = productsDatabase.find(p => p.id == productId);
            if (product) {
                showNotification(`${product.title} добавлен в корзину`, 'success');
            }
        }

        // Добавить в избранное
        function toggleFavorite(productId, button = null) {
            const product = productsDatabase.find(p => p.id == productId);
            if (product) {
                if (button) {
                    const icon = button.querySelector('i');
                    if (icon.classList.contains('fas')) {
                        icon.classList.remove('fas');
                        icon.classList.add('far');
                        showNotification(`${product.title} удален из избранного`, 'info');
                    } else {
                        icon.classList.remove('far');
                        icon.classList.add('fas');
                        icon.style.color = 'var(--secondary-color)';
                        showNotification(`${product.title} добавлен в избранное`, 'success');
                    }
                } else {
                    showNotification(`${product.title} добавлен в избранное`, 'success');
                }
            }
        }

        // Инициализация чата
        function initializeChat() {
            const chatToggle = document.getElementById('chatToggle');
            const chatWidget = document.getElementById('chatWidget');
            const closeChat = document.getElementById('closeChat');
            const minimizeChat = document.getElementById('minimizeChat');
            const sendBtn = document.getElementById('sendBtn');
            const chatInput = document.getElementById('chatInput');
            
            if (chatToggle) {
                chatToggle.addEventListener('click', () => openChat('TechBot Pro'));
            }
            
            if (closeChat) {
                closeChat.addEventListener('click', closeChatWidget);
            }
            
            if (minimizeChat) {
                minimizeChat.addEventListener('click', () => {
                    if (chatWidget) {
                        chatWidget.style.display = 'none';
                    }
                    if (chatToggle) {
                        chatToggle.style.display = 'flex';
                    }
                });
            }
            
            if (sendBtn && chatInput) {
                sendBtn.addEventListener('click', sendMessage);
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') sendMessage();
                });
            }
        }

        // Открыть чат с ИИ-продавцом
        function openChat(sellerName) {
            const chatWidget = document.getElementById('chatWidget');
            const chatToggle = document.getElementById('chatToggle');
            const chatBody = document.getElementById('chatBody');
            const sellerInfo = aiSellers[sellerName] || aiSellers['TechBot Pro'];
            
            if (!sellerInfo || !chatWidget || !chatToggle || !chatBody) return;
            
            chatWidget.style.display = 'flex';
            chatToggle.style.display = 'none';
            
            document.getElementById('chatSellerName').textContent = sellerInfo.name;
            document.getElementById('chatStatus').textContent = `Специалист по ${sellerInfo.specialty}, онлайн`;
            
            chatBody.innerHTML = '';
            
            const welcomeMsg = createChatMessage('bot', sellerInfo.greeting);
            chatBody.innerHTML += welcomeMsg;
            
            const suggestedQuestions = document.getElementById('suggestedQuestions');
            if (suggestedQuestions) {
                suggestedQuestions.innerHTML = '';
                
                sellerInfo.questions.forEach(question => {
                    const chip = document.createElement('div');
                    chip.className = 'question-chip';
                    chip.textContent = question;
                    chip.addEventListener('click', () => {
                        addUserMessage(question);
                        simulateAIResponse(sellerInfo, question);
                    });
                    suggestedQuestions.appendChild(chip);
                });
            }
            
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                chatInput.focus();
            }
            
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Закрыть чат
        function closeChatWidget() {
            const chatWidget = document.getElementById('chatWidget');
            const chatToggle = document.getElementById('chatToggle');
            
            if (chatWidget) {
                chatWidget.style.display = 'none';
            }
            if (chatToggle) {
                chatToggle.style.display = 'flex';
            }
        }

        // Создать сообщение чата
        function createChatMessage(sender, text) {
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            return `
                <div class="chat-message ${sender}">
                    <div class="message-bubble">${text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
        }

        // Добавить сообщение пользователя
        function addUserMessage(text) {
            const chatBody = document.getElementById('chatBody');
            if (!chatBody) return;
            
            const message = createChatMessage('user', text);
            chatBody.innerHTML += message;
            
            const chatInput = document.getElementById('chatInput');
            if (chatInput) {
                chatInput.value = '';
            }
            
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // Отправить сообщение
        function sendMessage() {
            const chatInput = document.getElementById('chatInput');
            const message = chatInput ? chatInput.value.trim() : '';
            
            if (!message) return;
            
            addUserMessage(message);
            
            setTimeout(() => {
                const sellerName = document.getElementById('chatSellerName').textContent;
                const sellerInfo = aiSellers[sellerName] || aiSellers['TechBot Pro'];
                simulateAIResponse(sellerInfo, message);
            }, 1000);
        }

        // Имитация ответа ИИ
        function simulateAIResponse(sellerInfo, userQuestion = '') {
            const chatBody = document.getElementById('chatBody');
            if (!chatBody) return;
            
            // Показать индикатор набора текста
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'chat-message bot';
            typingIndicator.innerHTML = `
                <div class="message-bubble">
                    <div class="loading"></div>
                    ИИ печатает...
                </div>
            `;
            chatBody.appendChild(typingIndicator);
            chatBody.scrollTop = chatBody.scrollHeight;
            
            // Удалить индикатор и показать ответ
            setTimeout(() => {
                typingIndicator.remove();
                
                let response;
                const randomResponse = sellerInfo.responses[Math.floor(Math.random() * sellerInfo.responses.length)];
                response = randomResponse;
                
                const message = createChatMessage('bot', response);
                chatBody.innerHTML += message;
                chatBody.scrollTop = chatBody.scrollHeight;
            }, 1500);
        }

        // Глобальные функции
        window.closeModal = closeModal;
        window.openChat = openChat;
        window.addToCart = addToCart;
        window.toggleFavorite = toggleFavorite;
    </script>
</body>
</html>
